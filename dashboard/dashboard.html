<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" href="../assets/css/dashboard.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Configuração da API -->
  <script src="../api-config.js"></script>
</head>
<body>

<header class="topo-sistema">
  <div class="usuario-area">
    <span id="tipo-usuario">admin</span>
    <button onclick="logout()" class="logout-btn">Sair</button>
  </div>
  <h1>Caad Rastreamento</h1>
</header>

<nav class="navigation">
  <a href="dashboard.html" class="nav-btn active">Dashboard</a>
  <a href="../clientes_ativos/clientes-ativos.html" class="nav-btn">Clientes Ativos</a>
  <a href="../clientes_cancelados/clientes-cancelados.html" class="nav-btn">Clientes Cancelados</a>
  <a href="../estoque/estoque.html" class="nav-btn">Estoque</a>
  <a href="../equipamentos_perdidos/equipamentos-perdidos.html" class="nav-btn">Equipamentos Perdidos</a>
  <a href="../planos/planos.html" class="nav-btn">Planos</a>
  <a href="../sinistros/sinistros.html" class="nav-btn">Sinistros</a>
  <a href="../log/log.html" class="nav-btn">Controle de Log</a>
</nav>

<div style="margin-bottom: 20px;">
  <label for="filtro-mes">Mês:</label>
  <select id="filtro-mes">
    <option value="0">Jan</option>
    <option value="1">Fev</option>
    <option value="2">Mar</option>
    <option value="3">Abr</option>
    <option value="4">Mai</option>
    <option value="5">Jun</option>
    <option value="6">Jul</option>
    <option value="7">Ago</option>
    <option value="8">Set</option>
    <option value="9">Out</option>
    <option value="10">Nov</option>
    <option value="11">Dez</option>
  </select>

  <label for="filtro-ano">Ano:</label>
  <select id="filtro-ano"></select>
</div>


<div class="dashboard">
  <div class="indicators-grid">
    <div class="indicator-card">
      <h3>Clientes Ativos</h3>
      <span id="clientes-ativos" class="big-number"></span>
    </div>
    <div class="indicator-card">
      <h3>Instalações no Mês</h3>
      <span id="instalacoes-mes" class="big-number"></span>
    </div>
    <div class="indicator-card">
      <h3>Cancelamentos no Mês</h3>
      <span id="cancelamentos-mes" class="big-number"></span>
    </div>
    <div class="indicator-card">
      <h3>Equipamentos Perdidos</h3>
      <span id="equipamentos-perdidos" class="big-number"></span>
    </div>
    <div class="indicator-card">
      <h3>Equipamentos no Estoque</h3>
      <span id="equipamentos-estoque" class="big-number"></span>
    </div>
    <div class="indicator-card">
      <h3>Chips no Estoque</h3>
      <span id="estoqueChips" class="big-number"></span>
    </div>
  </div>
</div>

<div class="charts-grid">
  <div class="chart-medium">
    <canvas id="chart-distribuicao"></canvas>
  </div>
  <div class="chart-medium">
    <canvas id="chart-instalacoes"></canvas>
  </div>
  <div class="chart-medium">
    <canvas id="chart-sinistros"></canvas>
  </div>
</div>

<script src="../seguranca/seguranca.js"></script>
<script>
verificarLogin();         // Garante que o usuário está logado
aplicarPermissoes();      // Aplica as restrições para visualizadores
mostrarUsuarioLogado();   // Mostra tipo do usuário no topo
</script>
<script src="../scripts/script-dashboard.js"></script>
</body>
</html>
